- title 'Game Schedule'
- last_date = nil

.controls
  .left
    = render :partial => "league/shared/select_date_range", :locals => { :start_date => @start_date, :end_date => @end_date, :prev_date => @prev_date, :next_date => @next_date, :range => @days_in_future + @days_in_past }
  .right
    - if @division_links
      = render :partial => "league/shared/select_division", :locals => { :division_options => @division_links }
    - #collection_select("season", :id, @seasons, :slug, :name, { :include_blank => 'Full Schedules' })
    - if @team_links
      = select("team", :id, @team_links, { :include_blank => 'Team Schedules' }, { :class => "redirect_to" })
  .clear

.mod-container.mod-table.mod-no-header-footer
  .mod-content
    %table.stat#schedule{ :cellspacing => "1" }
      - if @games.count == 0
        %tr
          %td No games scheduled
      - else
        - @games.each do |game|
          - if game.starts_on.to_date != last_date
            - reset_cycle()
            %tr.group-head
              %td{ :colspan => "3" } #{game.starts_on.to_date.strftime("%A, %B %e %Y")}
            %tr.col-head
              %td.teams TEAMS
              %td.time TIME
              %td.location LOCATION
          %tr{ :class => cycle("odd","even") }
            %td
              - if game.has_result?
                - if game.right_team_is_winner?
                  #{game.right_team_name} #{game.right_team_score} , #{game.left_team_name} #{game.left_team_score}
                - else
                  #{game.left_team_name} #{game.left_team_score}, #{game.right_team_name} #{game.right_team_score} 
              - else
                #{game.left_team_name} vs. #{game.right_team_name} 
            %td #{game.starts_on.strftime("%l:%M %p")}
            %td Location
          - last_date = game.starts_on.to_date
- if @games.count > 0
  .controls
    .left
      = render :partial => "league/shared/select_date_range", :locals => { :start_date => @start_date, :end_date => @end_date, :prev_date => @prev_date, :next_date => @next_date, :range => @days_in_future + @days_in_past }
    .clear

