- title 'Pages'

- javascript("jquery-ui.min.js")

- content_for :javascript do
  :javascript
    $(function() {
      $("#pages ul").sortable({
        revert: "true",
        opacity: 0.7,
        placeholder: "ui-state-highlight",
        update: function( event, ui ) {  
          var items = $(this).sortable('serialize');
          $.ajax({
            type: 'post',
            data: items ,
            dataType: 'json',
            url: '#{position_pages_path(@page)}'
          }); 
        }
      });   
    });
- content_for :sidebar do
  %ul
    %li #{link_to 'Add New Page', new_page_path}

%section#pages.tree
  = render 'tree'

:css
  .ui-state-highlight { height: 1.5em; line-height: 1.2em; }
