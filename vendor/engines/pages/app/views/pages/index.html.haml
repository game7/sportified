- title 'Pages'

- javascript("jquery-ui.min.js")

:javascript
  $(function() {
    $("#pages ul").sortable({
      revert: "true",
      opacity: 0.7,
      placeholder: "ui-state-highlight",
      update: function( event, ui ) {  
        var items = $(this).sortable('serialize');
        $.ajax({
          type: 'post',
          data: items ,
          dataType: 'json',
          url: '#{position_pages_path(@page)}'
        }); 
      }
    });   
  });
- content_for :sidebar do
  %ul
    %li #{link_to 'Add New Page', new_page_path}

%section#pages.tree
  = render 'tree'

:css
  .ui-state-highlight { height: 1.5em; line-height: 1.2em; }
  #pages ul { margin-left: 0px; padding-left: 0px; }
  #pages.tree .trunk > li:first-child { background-image: url(/images/branch-start.gif); }
  #pages.tree ul li { margin: 0; padding: 4px 0px 0px 40px; background: url(/images/branch.gif) no-repeat 15px 0px; }
  #pages.tree li { line-height: 25px; display: block; position: relative; }
  #pages.tree ul li.branch_start { background-image: url(/images/branch-start.gif); }
  #pages.tree ul li:last-child { background-image: url(/images/branch-end.gif); }
  #pages.tree ul li > div:hover { background-color: #EAEAEA; }
  #pages.tree .actions { float: right; }

  



  

